name: pifan # you probably want to 'snapcraft register <name>'
title: PiFan
base: core18 # the base snap is the execution environment for this snap
version: '0.2+git' # just for humans, typically '1.2+git' or '1.3.2'
summary: Manages 3 and 4-pin fans connected to the Raspberry Pi's GPIO pins.
description: |
  PiFan is a background service used for running and managing cooling fans connected to the Raspberry Pi's
  GPIO pins. 
license: GPL-3.0

architectures:
  - build-on: amd64
    run-on: amd64
  
  - build-on: armhf
    run-on: armhf

  - build-on: aarch64
    run-on: aarch64

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots

apps:
  pifand:
    command: $SNAP/usr/local/pifan/pifan
    daemon: simple
    stop-timeout: 10s

parts:
  pifand:
    # See 'snapcraft plugins'
    plugin: cmake
    source: https://github.com/iAmSomeone2/pifan.git
    source-type: git
    source-depth: 1
    source-branch: master
    
    build-environment:
      - CC: /usr/bin/clang
      - CXX: /usr/bin/clang++

    build-packages: 
      - pkg-config
      - clang
      - libjsoncpp-dev

    configflags:
      - -DCMAKE_BUILD_TYPE=Release
